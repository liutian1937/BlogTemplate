<!DOCTYPE html>
<html lang="zh-CN" debug="true">
<head profile="http://gmpg.org/xfn/11">
<meta charset="UTF-8">
<title>Blog</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2, minimum-scale=1" />


<link rel="stylesheet" type="text/css" href="css/icon.css" />
<script type="text/javascript" src="js/JTouch.js"></script>
<script type="text/javascript" src="js/JScroll.js"></script>
<script type="text/javascript" src="js/common.js"></script>

<style>
html,body{width:100%;height:100%;margin:0;padding:0;}
html{font-size:62.5%;}
body{background:#303136;overflow:hidden;font-size:12px;font-size:1.2rem;}
div,p{padding:0;margin:0;}
.clear:after{content:"";display:block;height:0;clear:both;visibility: hidden;overflow:hidden;}
.clear{*zoom:1;}
.yahei{font-family:"Microsoft YaHei","微软雅黑" !important;}
a{text-decoration:none;outline:none;}

/*icons absolute position*/
.abs{position:absolute;left:10px;text-align:center;}
.top20{top:20px;}
.top90{top:90px;}
.bottom90{bottom:90px;}
.bottom0{bottom:0px;}

/*icons style*/
.icons{margin-bottom:30px;}
.icons a{display:none;}
.icon{font-size:1.6rem;color:#999;cursor:pointer;-webkit-transition:all 0.2s linear;display:block;}
.cur .icon{color:#fff;}
/*icons shadow*/
.shadow{text-shadow:0px 1px 1px rgba(0,0,0,1);-webkit-transition:all 0.2s linear;}
.shadow.hover{text-shadow:2px 0px 20px #fff,0px 2px 2px #000;}
.shadow.hover .icon{color:#fff;}

/*center icons*/
.centerIcon{height:100px;top:50%;margin-top:-50px;left:5px;}
.centerIcon .icons{margin-bottom:20px;}
.centerIcon .icon{font-size:2.4rem;color:#ccc;}

#wrap{width:100%;height:100%;overflow:hidden;}

#nav{float:left;width:40px;height:100%;border-right:1px solid #303136;box-shadow:0px 0px 2px #303136,-5px 0px 5px #333 inset;background:url(../images/bg.jpg) repeat;position:relative;}

#content{margin-left:42px;height:100%;background:#efedec;background:url(../images/bg_content.jpg) repeat;}


/*content left start*/
#contentLeft{width:320px;height:100%;float:left;border-right:1px solid #dcdad9;box-shadow:1px 0px 1px #fff;}

#itemWrap{height:100%;padding:0px 15px;overflow:hidden;}
	
	/*cateName style*/
	.item{list-style:none;margin:0px;padding:0;width:100%;position:relative;padding-top:50px;}
	.item li{margin:5px 3px 0px;padding:5px 0px;padding-left:20px;text-align:left;font-size:1.4rem;color:#999;line-height:22px;border:1px dashed transparent;cursor:pointer;}

	.item .cateName{z-index:999;height:50px;padding:0px;border:none;text-align:center;width:100%;margin:0px;position:absolute;top:0px;left:0px;}
	.item .cateName a{color:#333;display:inline-block;background:transparent url(../images/bg_title.png) no-repeat left top;padding-left:10px;width:96%;margin:6px 0px;}
	.item .cateName a span{display:block;line-height:38px;background:transparent url(../images/bg_title.png) no-repeat right top;padding:0 23px 0px 10px;}
	.item .title{color:#4d4d4d;}

#itemWrap p{margin:5px 5px 5px 0px;display:block;word-wrap:break-word;word-break:break-all;}
#itemWrap .title{word-wrap:break-word;word-break:break-all;line-height:25px;display:inline-block;margin-right:5px;}
#itemWrap .title:hover{color:#db4f33;}
#itemWrap time{font-size:1.2rem;margin:5px 0px;display:block;}
#itemWrap li.cur{border:1px dashed #c7c7c7;background:rgba(227,225,220,0.5);border-radius:3px;box-shadow:0px 0px 2px rgba(202,202,202,0.5);}

.ellipsis {overflow: hidden;height:50px;}
.ellipsis:before {content:"";float: left;width: 5px; height: 50px;}
.ellipsis > *:first-child {float: right;width: 100%;margin-left:-5px;}		
.ellipsis:after {content: "...";box-sizing: content-box;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;float: right; position: relative;top: -25px; left: 100%;width:2em; margin-left: -2em;padding-right: 5px;text-align: right;}

/*content right start*/
#contentRight{height:100%;margin-left:320px;position:relative;overflow:hidden;}
#contentTop{height:55px;margin:0px 50px;border-bottom:1px solid #e1e1e1;}
#contentWrap{margin:0px 80px;margin-top:20px;overflow:hidden;}
</style>
</head>
<body>
	
		<nav id="nav">
		
			<div class="abs top20 icons shadow">
				<span class="icon" data-icon="&#x0055;"></span>
				<a href="#">返回上一级</a>
			</div>
			
			<div class="abs top90">
				<div class="icons shadow">
					<span class="icon" data-icon="&#xe174;"></span>
					<a href="#">加星的</a>
				</div>
				
				<div class="icons shadow">
					<span class="icon" data-icon="&#xe10b;"></span>
					<a href="#">返回上一级</a>
				</div>
				
				<div class="icons shadow cur">
					<span class="icon" data-icon="&#xe11c;"></span>
					<a href="#">返回上一级</a>
				</div>
			</div>
			
			<div class="abs centerIcon">
				<div class="icons shadow">
					<span class="icon" data-icon="&#xe042;"></span>
					<a href="#">上一页</a>
				</div>
				
				<div class="icons shadow cur">
					<span class="icon" data-icon="&#xe044;"></span>
					<a href="#">下一页</a>
				</div>
			</div>
			
			<div class="abs bottom90">
				<div class="icons shadow cur">
					<span class="icon" data-icon="&#xe13a;"></span>
					<a href="#">按时间排序</a>
				</div>
				
				<div class="icons shadow">
					<span class="icon" data-icon="&#xe135;"></span>
					<a href="#">RSS订阅</a>
				</div>
			</div>
			
			<div class="abs bottom0">
				
				<div class="icons shadow">
					<span class="icon" data-icon="&#xe1df;"></span>
					<a href="#">更新</a>
				</div>
			</div>
			
		</nav>
		<div id="content" class="clear">
			<!--content left start-->
			<div id="contentLeft">
			
				<div id="itemWrap">
					<!--item list start-->
					
					<ul class="item">
						<li class="cateName">
							<a href="#" class="yahei"><span>html+css,html5,css3教程</span></a>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="http://baidu.com" class="title">纯css实现的六边形（蜂窝）导航效果</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li class="cur">
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">CSS3齿轮滚动效果</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">三角形变形记之纯css实现的分布导航条效果</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">分享几个CSS3实现的Loading载入动画效果</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">Html5（css3）的瀑布流布局的实现</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">jquery实现无限滚动瀑布流实现原理</a>
							<p>jquery实现无限滚动瀑布流实现原理jquery实现无限滚动瀑布流实现原理</p>
						</li>
					</ul>
					<ul class="item">
						<li class="cateName">
							<a href="#" class="yahei"><span>js,javascript,jquery教程</span></a>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">Js事件监听封装（支持匿名函数）</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">Follow,原生javascript跟随滚动条插件</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">JS判断鼠标从什么方向进入一个容器</a>
							<p>JS判断鼠标从什么方向进入一个容器JS判断鼠标从什么方向进入一个容器JS判断鼠标从什</p>
						</li>
					</ul>
					<ul class="item">
						<li class="cateName">
							<a href="#" class="yahei"><span>牛魔王的世界观</span></a>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">调用顾客最新浏览过的文章</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">调用顾客最新浏览过的文章</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">滚动条控制导航切换效果插件-AnchorTab（基于原生JS）</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">Js事件监听封装（支持匿名函数）</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">Follow,原生javascript跟随滚动条插件</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">JS判断鼠标从什么方向进入一个容器</a>
							<p>JS判断鼠标从什么方向进入一个容器JS判断鼠标从什么方向进入一个容器JS判断鼠标从什</p>
						</li>
					</ul>
					<ul class="item">
						<li class="cateName">
							<a href="#" class="yahei"><span>js,javascript,jquery教程</span></a>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">Js事件监听封装（支持匿名函数）</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">Follow,原生javascript跟随滚动条插件</a>
							<p>加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作</p>
						</li>
						<li>
							<time pubdate="pubdate">2013年4月8号星期三</time>
							<a href="#" class="title">JS判断鼠标从什么方向进入一个容器</a>
							<p>JS判断鼠标从什么方向进入一个容器JS判断鼠标从什么方向进入一个容器JS判断鼠标从什</p>
						</li>
					</ul>
					
					<!--item list end-->
				</div>
				
			</div>
			<!--content left end-->
			<!--content right start-->
			<div id="contentRight">
				
				<!--content top start-->
				<div id="contentTop">
					<span class="icon" data-icon="&#xe15b;"></span>
				</div>
				<!--content top end-->
				
					<div id="contentWrap">
					
						<div class="wp-caption aligncenter" id="attachment_1224" style="width: 460px;">
						<p><img class="size-full wp-image-1224" title="boat-anchor-text-links" alt="Javascript触屏手势库-jTouch" src="http://liutian1937.github.io/JTouch/images/jtouch.jpg" width="450" height="450"></p>
						<p class="wp-caption-text">Javascript触屏手势库-jTouch</p>
						</div>
						<p>触屏手势库--JTouch</p>
						<p>封装的代码有不足支出，以及bug等欢迎大家多多指正。</p>
						<p>Github地址：<a href="https://github.com/liutian1937/JTouch" target="_blank">https://github.com/liutian1937/JTouch</a>&nbsp;（大家可以fork项目跟踪最新进展）</p>
						<h2>JTouch的介绍</h2>
						<p>JTouch是针对触屏浏览器提供的一个手势集合，由于我的测试环境主要是ipad，所以对于其他触屏设备的支持情况可能会有所不足。这个在后期版本升级过程中会修复。</p>
						<p>JTouch在手指移动上去会触发<strong>start</strong>事件，结束会触发<strong>end</strong>事件。主要支持的手势有tap(单击)，doubletap(双击)，longtap（长按），hold（拖拽），swipe（滑动），flick（轻拂），pinch（捏合，拉伸），rotate（旋转）；除了pinch，rotate手势外，其他手势事件的回调函数都会返回<span style="color: #db4f33;"><strong>data['fingerNum']</strong><span style="color: #000000;">值，所以在回调函数中可以根据手指的数量来拼合其他的事件。</span></span></p>
						<p>其中每个手势事件都会返回响应的回调函数，接受回调函数的参数值一般定义为evt和data，可自行设定。</p>
						<ul>
						<li>其中swipe和flip可以返回方向data['direction']以及左右，上下移动的距离data['x']，data['y']，swipe事件结束会返回状态值data['status'] == &nbsp;end；</li>
						<li>pinch会返回type信息，即in和out，来判断向里还是向外压缩或者拉伸;返回data['scale']表示缩放比例；</li>
						<li>rotate同样会有direction信息来简单判断向左旋转亦或向右旋转，同时返回data['rotation']作为角度信息；</li>
						<li>每个手势事件都有相应的event对象返回，其中pinch和rotate返回的与其他的event对象是不同的，这两个返回的是gesturechange的事件对象，（详细信息可以在debug模式下调试查看）</li>
						</ul>
						<h2>jTouch的使用</h2>
						<ol>
						<li>实例化<br>
						var objTouch = document.getElementById('touch');<br>
						var Touches = JTouch(objTouch);</li>
						<li>采用链式写法，<br>
						<blockquote><p>Touches.on('手势名称',function(evt,data){<br>
						//回调函数部分<br>
						})</p>
						</blockquote>
						</li>
						<li>回调函数中返回相应的值</li>
						</ol>
						<h2>JTouch的示例</h2>
						<p><a href="http://liutian1937.github.io/JTouch/carousel.html" target="_blank">http://liutian1937.github.io/JTouch/carousel.html</a></p>
						<p>触摸平滑移动，其中用到了单独封装的translate插件，时间有限代码略显粗糙，各位看官见谅。</p>
						<p><a href="http://liutian1937.github.io/JTouch/touch.html" target="_blank">http://liutian1937.github.io/JTouch/touch.html</a></p>
						<p>稍微仿了下ipad的界面效果，有太多不足支持。长按可以触发icon抖动，双击空白取消效果，但是取消效果过程会产生抖动，希望哪位高人提点意见。其中想到了用-webkit-animation-play-state:paused;来实现，但是具体如何让动画停在第一帧不甚了解。</p>
						<p>另外做了个简单的图像效果，这个效果的flick效果还没有强化，关于这个效果我感觉我实现的复杂了一些，但是暂时没有想到万全之策，所以里面出现了不少的参数，哪位高人见到可以优化之。大家可以根据这个效果扩展成一个相册效果。具有左右翻的效果。</p>
						<hr>
						<p><strong>更新记录：</strong></p>
						<p><span style="color: #339966;">v1.1更新记录：</span></p>
						<pre>命名jTouch -&gt; JTouch
						实例化不需要new，直接JTouch
						加入鼠标手势操作，鼠标可以实现tap.doubletap,swipe,hold,flip操作，可以用mousewheel模拟pinch
						加入init(),destory()功能来实现重置和销毁
						<span style="color: #ff6600;">不足：手头没有win8的平板，暂时没有实现ie10的触控手势</span></pre>
						
					</div>
				
			</div>
			<!--content right end-->
		</div>

	
<script>
var Public = {
	getId : function (id) {
		return document.getElementById(id) || id;
	},
	addClass : function (element,value){
		if(!element.className){
			element.className = value;
		}else{
			var oValue = element.className;
			oValue += " ";
			oValue += value;
			element.className = oValue;
		}
	},
	removeClass : function (element, className){
		var reg = new RegExp('(\\s|^)' + className + '(\\s|$)');
		if (element.className.match(reg)){
			var reg = new RegExp('(\\s|^)' + className + '(\\s|$)');
			element.className = element.className.replace(reg, ' ');
		}
	},
	removeAllClass : function (name) {
		var i = 0, len, list = Public.getId('itemWrap').getElementsByTagName('li');
		len = list.length;
		for (i; i<len; i += 1) {
			Public.removeClass(list[i],name);
		};
	}
}

//左侧导航部分
JTouch(Public.getId('nav')).on('start',function(evt){
	var target = evt.target.parentNode;
	if(hasClass(target,'icons')){
		addClass(target,'hover');
	}
}).on('end',function(evt){
	var target = evt.target.parentNode;
	if(hasClass(target,'icons')){
		setTimeout(function(){
			removeClass(target,'hover');
		},500);
	}
});

//中间标题列表
JScroll({
	'wrap' : Public.getId('itemWrap'),
	'callback' : function (id,target){
		Public.removeAllClass('cur');
		target.className = 'cur';
	}
});

var cw = Public.getId('contentWrap');
var pageY = function(elem){
			//获取距离顶部的距离
			return elem.offsetParent?(elem.offsetTop+pageY(elem.offsetParent)):elem.offsetTop;
		}
var dheight = Math.max(document.body.offsetHeight,document.body.clientHeight);
var sheight = dheight - pageY(cw);
cw.style.height = sheight + 'px';
</script>
</body>
</html>